<?xml version="1.0" encoding="UTF-8" ?>


<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">

    <select id="chkID" parameterType="String" resultType="Int">
     <![CDATA[
            select count(LoginID) from Users where LoginID = #{memid}
        ]]>
    </select>

    <select id="login_ok" parameterType="UserVo" resultType="UserVo">
        <![CDATA[
                select User_no, NameHan, LoginID, AuthCode,
                        substring(StudResNum,1,6) StudResNum, SleepStat,
                        DATEDIFF(current_date,RegDate) RegDate,
                        DATEDIFF(current_date,ReAgreeDate) ReAgreeDate
                from Users
                where LoginID=#{loginID}
                       and Password=#{password}
        ]]>
    </select>

    <insert id="member_ipin_result_ok_old" parameterType="MemberVo" >
        <![CDATA[
                insert into
        ]]>
    </insert>

    <update id="ReAgree" parameterType="UserVo">
        <![CDATA[
                update Users set ReAgreeDate=current_date where LoginID=#{loginID} and User_no=#{user_no}
        ]]>
    </update>

    <update id="ActivateSleepingAccount" parameterType="UserVo">
        <![CDATA[
                update Users set SleepStat='정상' where LoginID=#{loginID} and User_no=#{user_no}
        ]]>
    </update>

    <select id="Member_modify" parameterType="Int" resultType="UserModVo">
        <![CDATA[
                select LoginID, NameHan, NameEng, Gender, Email, PostNum,
                        Address, FamilyPostNum, FamilyAddress, Telephone, Cellphone, BitLetter
                from Users where User_no=#{user_no};
        ]]>
    </select>

    <select id="Member_modify_school" parameterType="Int" resultType="UserModVo">
        <![CDATA[
                select UserScholarship_no, User_no, substring(StartDate,1,4) StartYear,
                        substring(StartDate,6,7) StartMon,
                        substring(EndDate,1,4) EndYear, substring(EndDate,6,7) EndMon, StartDate, EndDate, School, State,
                        Location, Degree, Major, SubMajor
                from UserScholarship
                where User_no=#{user_no}
                order by UserScholarship_no
        ]]>
    </select>
</mapper>
